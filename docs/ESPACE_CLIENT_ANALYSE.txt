â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANALYSE COMPLÃˆTE DE L'ESPACE CLIENT - LE OUI PARFAIT
   Synchronisation des donnÃ©es Agence â†” Client
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ TABLE DES MATIÃˆRES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Pages et FonctionnalitÃ©s de l'Espace Client
2. Ã‰tat Actuel (Statique vs Dynamique)
3. Architecture de Synchronisation des DonnÃ©es
4. Plan de Dynamisation par Page
5. Collections Firebase NÃ©cessaires
6. ImplÃ©mentation RecommandÃ©e

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. PAGES ET FONCTIONNALITÃ‰S DE L'ESPACE CLIENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.1 DASHBOARD PRINCIPAL (/espace-client)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: PARTIELLEMENT DYNAMIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Affichage informations Ã©vÃ©nement (date, lieu, invitÃ©s, budget)
   âœ“ Compte Ã  rebours jusqu'au mariage
   âœ“ Widgets: Documents rÃ©cents, Paiements, Timeline
   
ğŸ”— DonnÃ©es rÃ©cupÃ©rÃ©es:
   - Collection: 'events' (par client_email)
   - Champs: couple_names, event_date, location, guest_count, budget

âš ï¸  ProblÃ¨mes:
   - DonnÃ©es widgets STATIQUES (tabs/ClientTimeline, ClientDocuments, ClientPayments)
   - Pas de relation planner_id â†” client_id

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.2 CHECK-LIST (/espace-client/checklist)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Liste des tÃ¢ches par catÃ©gorie
   âœ“ Progression globale
   âœ“ Filtrage par statut/prioritÃ©
   âœ“ Marquage tÃ¢ches complÃ©tÃ©es
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - initialChecklistItems (17 tÃ¢ches statiques)
   - Component: ChecklistManager (possiblement dynamique)

ğŸ¯ Ã€ DYNAMISER:
   - Fetch depuis 'checklist' collection
   - Filter: client_id ou event_id
   - Synchronisation temps rÃ©el avec agence

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.3 DOCUMENTS (/espace-client/documents)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Affichage documents (contrats, devis, factures)
   âœ“ Visualisation/tÃ©lÃ©chargement PDF
   âœ“ Statut documents (signÃ©, acceptÃ©, payÃ©)
   âœ“ Filtrage par catÃ©gorie
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - Array 'documents' (10+ documents statiques)

ğŸ¯ Ã€ DYNAMISER:
   - Fetch depuis 'documents' collection
   - Filter: client_id
   - Liens vers PDFs Cloudinary
   - Actions: voir, tÃ©lÃ©charger

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.4 PLANNING (/espace-client/planning)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: PARTIELLEMENT DYNAMIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Calendrier des rendez-vous
   âœ“ Jalons (milestones) du mariage
   âœ“ Demande de rendez-vous
   âœ“ Confirmation disponibilitÃ©s
   
ğŸ’¾ DonnÃ©es:
   - Events: STATIQUES (array local)
   - Components: MilestoneManager, AppointmentRequest (possiblement dynamiques)

ğŸ¯ Ã€ DYNAMISER:
   - Fetch 'events' collection (filter: client_id, type: 'rdv')
   - Fetch 'milestones' pour jalons importants
   - Synchronisation demandes RDV avec agence

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.5 MESSAGES (/espace-client/messages)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Messagerie avec wedding planner
   âœ“ Conversations avec prestataires
   âœ“ PiÃ¨ces jointes
   âœ“ Statut lecture (lu/non lu)
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - conversations (3 conversations)
   - messages (array de messages)

ğŸ¯ Ã€ DYNAMISER:
   - Collection 'conversations' (client_id, planner_id, prestataire_id)
   - Collection 'messages' (conversation_id)
   - WebSockets pour temps rÃ©el
   - Notifications push

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.6 PAIEMENTS (/espace-client/paiements)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ RÃ©sumÃ© budget (total, payÃ©, en attente)
   âœ“ Historique paiements
   âœ“ Factures tÃ©lÃ©chargeables
   âœ“ Planification paiements
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - budgetSummary
   - payments (10+ paiements)

ğŸ¯ Ã€ DYNAMISER:
   - Fetch 'invoices' (filter: client_id)
   - Fetch 'payments' (filter: client_id)
   - Calcul budget dynamique
   - IntÃ©gration Stripe pour paiements en ligne

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.7 PRESTATAIRES (/espace-client/prestataires)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Liste des prestataires sÃ©lectionnÃ©s
   âœ“ CoordonnÃ©es et infos contact
   âœ“ Prochain RDV
   âœ“ Notation/avis
   âœ“ Envoi message direct
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - prestataires (8+ prestataires)

ğŸ¯ Ã€ DYNAMISER:
   - Fetch 'vendors' (filter: event_id ou client_id)
   - Relation avec 'events' pour RDV
   - Messages intÃ©grÃ©s via collection 'conversations'

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.8 GALERIE (/espace-client/galerie)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Albums photos (inspiration, lieu, dÃ©coration, etc.)
   âœ“ Upload photos
   âœ“ Like/favoris
   âœ“ Lightbox visualisation
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - albums (5 albums)
   - photos (15+ photos Unsplash)

ğŸ¯ Ã€ DYNAMISER:
   - Collection 'galleries' (event_id, album_name)
   - Collection 'photos' (gallery_id, cloudinary_url)
   - Upload vers Cloudinary
   - Partage avec planner et prestataires

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.9 MON MARIAGE (/espace-client/mariage)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: TOTALEMENT STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Informations couple
   âœ“ DÃ©tails Ã©vÃ©nement (date, heure, lieu)
   âœ“ Gestion invitÃ©s (invitÃ©s, confirmÃ©s, dÃ©clinÃ©s)
   âœ“ ThÃ¨me mariage (style, palette couleurs)
   âœ“ Notes personnelles
   
ğŸ’¾ DonnÃ©es HARDCODÃ‰ES:
   - weddingData (objet complet)
   - Component: ColorPalette

ğŸ¯ Ã€ DYNAMISER:
   - Fetch/Update 'events' collection
   - Sous-collection 'guests' pour invitÃ©s
   - Sauvegarde thÃ¨me et prÃ©fÃ©rences
   - Ã‰dition en temps rÃ©el

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1.10 PARAMÃˆTRES (/espace-client/parametres)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“Œ Ã‰tat actuel: STATIQUE
ğŸ“Š FonctionnalitÃ©s:
   âœ“ Changement mot de passe
   âœ“ PrÃ©fÃ©rences notifications
   âœ“ Informations personnelles
   
ğŸ¯ Ã€ DYNAMISER:
   - Collection 'client_settings'
   - IntÃ©gration Firebase Auth
   - Mise Ã  jour profil


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. Ã‰TAT ACTUEL - SYNTHÃˆSE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PAGE                       â”‚ Ã‰TAT         â”‚ NIVEAU PRIORITÃ‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dashboard                  â”‚ 30% dynamiqueâ”‚ ğŸ”´ Ã‰LEVÃ‰E                      â”‚
â”‚ Checklist                  â”‚ 0% dynamique â”‚ ğŸ”´ Ã‰LEVÃ‰E                      â”‚
â”‚ Documents                  â”‚ 0% dynamique â”‚ ğŸ”´ Ã‰LEVÃ‰E                      â”‚
â”‚ Planning                   â”‚ 20% dynamiqueâ”‚ ğŸŸ¡ MOYENNE                     â”‚
â”‚ Messages                   â”‚ 0% dynamique â”‚ ğŸ”´ Ã‰LEVÃ‰E                      â”‚
â”‚ Paiements                  â”‚ 0% dynamique â”‚ ğŸŸ¡ MOYENNE                     â”‚
â”‚ Prestataires               â”‚ 0% dynamique â”‚ ğŸŸ¡ MOYENNE                     â”‚
â”‚ Galerie                    â”‚ 0% dynamique â”‚ ğŸŸ¢ BASSE                       â”‚
â”‚ Mon Mariage                â”‚ 0% dynamique â”‚ ğŸŸ¡ MOYENNE                     â”‚
â”‚ ParamÃ¨tres                 â”‚ 0% dynamique â”‚ ğŸŸ¢ BASSE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. ARCHITECTURE DE SYNCHRONISATION DES DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.1 MODÃˆLE DE RELATION AGENCE â†” CLIENT                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PLANNER        â”‚
    â”‚  (Agence)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ planner_id
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   CLIENTS        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   EVENTS         â”‚
    â”‚                  â”‚  client_id  â”‚                  â”‚
    â”‚ - planner_id     â”‚         â”‚ - client_id      â”‚
    â”‚ - name           â”‚         â”‚ - planner_id     â”‚
    â”‚ - partner        â”‚         â”‚ - event_date     â”‚
    â”‚ - email          â”‚         â”‚ - location       â”‚
    â”‚ - client_user_id â”‚         â”‚ - budget         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                            â”‚
             â”‚                            â”‚ event_id
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
             â”‚                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   DOCUMENTS      â”‚         â”‚   CHECKLIST      â”‚
    â”‚                  â”‚         â”‚                  â”‚
    â”‚ - client_id      â”‚         â”‚ - event_id       â”‚
    â”‚ - planner_id     â”‚         â”‚ - client_id      â”‚
    â”‚ - file_url       â”‚         â”‚ - tasks[]        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                            â”‚
             â”‚                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   INVOICES       â”‚         â”‚   PAYMENTS       â”‚
    â”‚                  â”‚         â”‚                  â”‚
    â”‚ - client_id      â”‚         â”‚ - client_id      â”‚
    â”‚ - planner_id     â”‚         â”‚ - invoice_id     â”‚
    â”‚ - amount         â”‚         â”‚ - amount         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.2 COLLECTIONS FIREBASE REQUISES                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ COLLECTION: clients
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  planner_id: string,              // Lien vers l'agence
  client_user_id: string,           // UID Firebase Auth du client
  name: string,
  partner: string,
  email: string,
  phone: string,
  event_date: string,
  event_location: string,
  created_at: timestamp
}

ğŸ“¦ COLLECTION: events
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  client_id: string,
  planner_id: string,
  couple_names: string,
  event_date: string,
  location: string,
  guest_count: number,
  budget: number,
  theme: {
    style: string,
    colors: string[],
    description: string
  },
  notes: string,
  created_at: timestamp
}

ğŸ“¦ COLLECTION: checklist
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  event_id: string,
  client_id: string,
  planner_id: string,
  title: string,
  description: string,
  deadline: string,
  completed: boolean,
  completed_at: timestamp,
  category: string,
  priority: 'high' | 'medium' | 'low',
  created_at: timestamp
}

ğŸ“¦ COLLECTION: documents
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  client_id: string,
  planner_id: string,
  event_id: string,
  name: string,
  type: 'contrat' | 'devis' | 'facture' | 'photo' | 'autre',
  file_url: string,
  file_type: string,
  file_size: number,
  status: 'signed' | 'accepted' | 'paid' | 'pending',
  uploaded_at: string,
  created_timestamp: timestamp
}

ğŸ“¦ COLLECTION: conversations
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  client_id: string,
  planner_id: string,
  vendor_id: string (optional),
  participants: string[],           // [client_user_id, planner_user_id]
  last_message: string,
  last_message_at: timestamp,
  unread_count_client: number,
  unread_count_planner: number,
  created_at: timestamp
}

ğŸ“¦ COLLECTION: messages
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  conversation_id: string,
  sender_id: string,                // UID utilisateur
  sender_role: 'client' | 'planner' | 'vendor',
  content: string,
  attachments: string[],            // URLs Cloudinary
  read: boolean,
  read_at: timestamp,
  created_at: timestamp
}

ğŸ“¦ COLLECTION: invoices (rÃ©utiliser existante)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  client_id: string,
  planner_id: string,
  invoice_number: string,
  amount: number,
  status: 'paid' | 'pending' | 'overdue',
  due_date: string,
  paid_date: string,
  pdf_url: string,
  items: [...],
  created_at: timestamp
}

ğŸ“¦ COLLECTION: payments
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  client_id: string,
  invoice_id: string,
  amount: number,
  method: 'virement' | 'carte' | 'cheque' | 'especes',
  status: 'completed' | 'pending' | 'failed',
  transaction_id: string,
  paid_at: timestamp,
  created_at: timestamp
}

ğŸ“¦ COLLECTION: vendors (rÃ©utiliser existante)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ajouter champs:
  - event_ids: string[]             // Ã‰vÃ©nements associÃ©s
  - next_appointment: {
      date: string,
      time: string,
      description: string
    }

ğŸ“¦ COLLECTION: galleries
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
{
  id: string,
  event_id: string,
  client_id: string,
  planner_id: string,
  name: string,
  description: string,
  photos: [{
    id: string,
    url: string,               // Cloudinary URL
    thumbnail_url: string,
    uploaded_by: 'client' | 'planner',
    uploaded_at: timestamp,
    liked: boolean
  }],
  created_at: timestamp
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3.3 FORMULES DE SYNCHRONISATION                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”„ MÃ‰THODE 1: REQUÃŠTES DIRECTES AVEC FILTRES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Usage: Pour donnÃ©es peu frÃ©quemment modifiÃ©es

// CÃ´tÃ© AGENCE - CrÃ©er un client
const clientData = {
  planner_id: user.uid,
  client_user_id: createdClientAuthId,  // CrÃ©Ã© via Firebase Auth
  name: "Julie Martin",
  partner: "FrÃ©dÃ©rick Dubois",
  email: "julie@example.com",
  ...
};
await addDocument('clients', clientData);

// CÃ´tÃ© CLIENT - Fetch ses donnÃ©es
const clientId = await getClientIdFromAuth(user.uid);
const clientData = await getDocument('clients', clientId);
const events = await getDocuments('events', [
  { field: 'client_id', operator: '==', value: clientId }
]);

ğŸ”„ MÃ‰THODE 2: LISTENERS TEMPS RÃ‰EL (onSnapshot)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Usage: Pour messagerie, notifications, checklist

// CÃ´tÃ© CLIENT - Ã‰couter nouveaux messages
useEffect(() => {
  if (!conversationId) return;
  
  const { collection, query, where, orderBy, onSnapshot } = 
    await import('firebase/firestore');
  const { db } = await import('@/lib/firebase');
  
  const messagesRef = collection(db, 'messages');
  const q = query(
    messagesRef,
    where('conversation_id', '==', conversationId),
    orderBy('created_at', 'asc')
  );
  
  const unsubscribe = onSnapshot(q, (snapshot) => {
    const newMessages = snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    }));
    setMessages(newMessages);
  });
  
  return () => unsubscribe();
}, [conversationId]);

ğŸ”„ MÃ‰THODE 3: CLOUD FUNCTIONS POUR SYNCHRONISATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Usage: Actions complexes nÃ©cessitant validation

// Trigger quand planner crÃ©e un document pour client
exports.onDocumentCreated = functions.firestore
  .document('documents/{documentId}')
  .onCreate(async (snap, context) => {
    const docData = snap.data();
    
    // Envoyer notification au client
    await sendNotificationToClient(docData.client_id, {
      title: 'Nouveau document disponible',
      body: `${docData.name} a Ã©tÃ© ajoutÃ© Ã  votre espace`,
      type: 'document',
      document_id: snap.id
    });
    
    // CrÃ©er une entrÃ©e timeline
    await addDocument('timeline', {
      event_id: docData.event_id,
      type: 'document_added',
      description: `Document ajoutÃ©: ${docData.name}`,
      created_at: new Date()
    });
  });

ğŸ”„ MÃ‰THODE 4: HELPER FUNCTIONS PARTAGÃ‰ES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CrÃ©er: /lib/client-data.ts

export async function getClientEventData(userId: string) {
  // 1. RÃ©cupÃ©rer client via client_user_id
  const clients = await getDocuments('clients', [
    { field: 'client_user_id', operator: '==', value: userId }
  ]);
  
  if (clients.length === 0) return null;
  const client = clients[0];
  
  // 2. RÃ©cupÃ©rer Ã©vÃ©nement
  const events = await getDocuments('events', [
    { field: 'client_id', operator: '==', value: client.id }
  ]);
  
  return {
    client,
    event: events[0] || null
  };
}

export async function getClientDocuments(clientId: string) {
  return await getDocuments('documents', [
    { field: 'client_id', operator: '==', value: clientId }
  ]);
}

export async function getClientChecklist(eventId: string) {
  return await getDocuments('checklist', [
    { field: 'event_id', operator: '==', value: eventId }
  ]);
}

export async function getClientConversations(clientId: string) {
  return await getDocuments('conversations', [
    { field: 'client_id', operator: '==', value: clientId }
  ]);
}


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. PLAN DE DYNAMISATION PAR PAGE (PRIORITÃ‰)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ PHASE 1 - PRIORITÃ‰ Ã‰LEVÃ‰E (Semaine 1-2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 1. DASHBOARD
   - CrÃ©er helper getClientEventData()
   - Remplacer fetch statique par donnÃ©es client rÃ©elles
   - Dynamiser widgets (Documents, Paiements, Timeline)

âœ… 2. DOCUMENTS
   - Fetch depuis collection 'documents'
   - Filtrer par client_id
   - Actions: voir PDF (window.open), tÃ©lÃ©charger
   - Statuts dynamiques depuis DB

âœ… 3. CHECKLIST
   - Fetch depuis collection 'checklist'
   - Filtrer par event_id
   - Update completed status en temps rÃ©el
   - Synchronisation bidirectionnelle avec agence

âœ… 4. MESSAGES
   - CrÃ©er collections conversations + messages
   - ImplÃ©mentation onSnapshot pour temps rÃ©el
   - Interface envoi message avec upload piÃ¨ces jointes
   - Notifications non lus

ğŸŸ¡ PHASE 2 - PRIORITÃ‰ MOYENNE (Semaine 3-4)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 5. PLANNING
   - Fetch Ã©vÃ©nements/RDV depuis 'events'
   - Jalons depuis sous-collection ou champ dÃ©diÃ©
   - Formulaire demande RDV â†’ notification planner
   - Confirmation RDV bidirectionnelle

âœ… 6. PAIEMENTS
   - Fetch invoices par client_id
   - Fetch payments history
   - Calcul budget dynamique
   - (Optionnel) IntÃ©gration Stripe

âœ… 7. PRESTATAIRES
   - Fetch vendors liÃ©s Ã  l'event_id
   - Prochain RDV depuis 'events' ou vendors.next_appointment
   - Bouton message â†’ redirect vers /messages avec conversation_id

âœ… 8. MON MARIAGE
   - Fetch/Update event data
   - Gestion invitÃ©s (sous-collection ou champ array)
   - Sauvegarde thÃ¨me et prÃ©fÃ©rences
   - Ã‰dition temps rÃ©el

ğŸŸ¢ PHASE 3 - PRIORITÃ‰ BASSE (Semaine 5+)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 9. GALERIE
   - Collection galleries avec photos[]
   - Upload vers Cloudinary
   - Like/favoris persistants
   - Partage avec planner

âœ… 10. PARAMÃˆTRES
   - Collection client_settings
   - Mise Ã  jour profil
   - Changement mot de passe (Firebase Auth)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. IMPLÃ‰MENTATION RECOMMANDÃ‰E - Ã‰TAPE PAR Ã‰TAPE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1: CrÃ©er les helpers de donnÃ©es client
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Fichier: /lib/client-helpers.ts

export async function getClientByAuthId(authUserId: string) {
  const clients = await getDocuments('clients', [
    { field: 'client_user_id', operator: '==', value: authUserId }
  ]);
  return clients[0] || null;
}

export async function getClientEvent(clientId: string) {
  const events = await getDocuments('events', [
    { field: 'client_id', operator: '==', value: clientId }
  ]);
  return events[0] || null;
}

Ã‰TAPE 2: CrÃ©er un Context partagÃ© pour l'espace client
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Fichier: /contexts/ClientDataContext.tsx

export const ClientDataContext = createContext({
  client: null,
  event: null,
  loading: true,
  refresh: () => {}
});

export function ClientDataProvider({ children }) {
  const { user } = useAuth();
  const [client, setClient] = useState(null);
  const [event, setEvent] = useState(null);
  const [loading, setLoading] = useState(true);
  
  const fetchData = useCallback(async () => {
    if (!user || user.role !== 'client') return;
    
    const clientData = await getClientByAuthId(user.uid);
    if (clientData) {
      setClient(clientData);
      const eventData = await getClientEvent(clientData.id);
      setEvent(eventData);
    }
    setLoading(false);
  }, [user]);
  
  useEffect(() => {
    fetchData();
  }, [fetchData]);
  
  return (
    <ClientDataContext.Provider value={{ 
      client, 
      event, 
      loading, 
      refresh: fetchData 
    }}>
      {children}
    </ClientDataContext.Provider>
  );
}

Ã‰TAPE 3: Wrapper l'espace client avec le Context
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Fichier: /app/espace-client/layout.tsx

export default function ClientLayout({ children }) {
  return (
    <ClientDataProvider>
      {children}
    </ClientDataProvider>
  );
}

Ã‰TAPE 4: Utiliser le context dans chaque page
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Dans chaque page de l'espace client
const { client, event, loading } = useContext(ClientDataContext);

// Puis fetch les donnÃ©es spÃ©cifiques Ã  la page
const [documents, setDocuments] = useState([]);

useEffect(() => {
  if (client) {
    fetchDocuments(client.id);
  }
}, [client]);


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. CHECKLIST DE MISE EN Å’UVRE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Infrastructure
  â–¡ CrÃ©er /lib/client-helpers.ts
  â–¡ CrÃ©er /contexts/ClientDataContext.tsx
  â–¡ Ajouter layout.tsx dans /app/espace-client
  â–¡ Mettre Ã  jour collections Firestore

â–¡ Dashboard
  â–¡ IntÃ©grer ClientDataContext
  â–¡ Dynamiser widgets Documents/Paiements/Timeline
  â–¡ Tester compte Ã  rebours

â–¡ Documents
  â–¡ Fetch documents par client_id
  â–¡ ImplÃ©menter voir/tÃ©lÃ©charger PDF
  â–¡ Afficher statuts dynamiques

â–¡ Checklist
  â–¡ Fetch checklist par event_id
  â–¡ ImplÃ©menter toggle completed
  â–¡ Calculer progression

â–¡ Messages
  â–¡ CrÃ©er collections conversations/messages
  â–¡ ImplÃ©menter onSnapshot listeners
  â–¡ Interface envoi message
  â–¡ Upload piÃ¨ces jointes Cloudinary

â–¡ Planning
  â–¡ Fetch RDV par event_id
  â–¡ Formulaire demande RDV
  â–¡ Affichage jalons

â–¡ Paiements
  â–¡ Fetch invoices/payments
  â–¡ Calcul budget
  â–¡ Historique transactions

â–¡ Prestataires
  â–¡ Fetch vendors liÃ©s Ã  event
  â–¡ Afficher next RDV
  â–¡ Lien vers messages

â–¡ Mon Mariage
  â–¡ Fetch/Update event
  â–¡ Gestion invitÃ©s
  â–¡ Sauvegarde thÃ¨me

â–¡ Galerie
  â–¡ Collection galleries
  â–¡ Upload Cloudinary
  â–¡ Likes persistants

â–¡ ParamÃ¨tres
  â–¡ Collection settings
  â–¡ Update profil
  â–¡ Changement mot de passe


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIN DU DOCUMENT - PRÃŠT POUR IMPLÃ‰MENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
